<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Аерохокей v6 - Просунуте Уникнення Кутів</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f0f0f0; flex-direction: column; font-family: sans-serif; }
        canvas { border: 2px solid black; display: block; margin-top: 10px; cursor: grab; }
        canvas.grabbing { cursor: grabbing; }
        #difficultySelector { position: absolute; top: 10px; left: 10px; z-index: 10; }
        label { margin-right: 5px; }
         /* **НОВЕ**: Стиль для повзунка */
         #speedControl { position: absolute; top: 40px; left: 10px; z-index: 10; background: rgba(255,255,255,0.8); padding: 5px; border-radius: 5px; }
         #speedControl label { display: block; margin-bottom: 3px; font-size: 0.9em;}
         #speedValue { font-weight: bold; }

    </style>
</head>
<body>

    <div>
        <label for="difficulty">Складність ШІ:</label>
        <select id="difficulty">
            <option value="easy">Легка</option>
            <option value="medium" selected>Середня</option>
            <option value="hard">Важка</option>
        </select>
    </div>

    <!-- **НОВЕ**: Повзунок для швидкості -->
    <div id="speedControl">
         <label for="aiSpeed">Швидкість ШІ: <span id="speedValue">1.0</span>x</label>
         <input type="range" id="aiSpeed" min="0.2" max="2.5" value="1.0" step="0.1">
    </div>


    <script>

function _0x56c5(_0x506c95,_0x4d1bbb){const _0x556631=_0x5566();return _0x56c5=function(_0x56c500,_0x376c66){_0x56c500=_0x56c500-0x101;let _0x542910=_0x556631[_0x56c500];return _0x542910;},_0x56c5(_0x506c95,_0x4d1bbb);}const _0x3c8eb5=_0x56c5;(function(_0x3d3183,_0x1462c0){const _0x4467df=_0x56c5,_0x2bafaa=_0x3d3183();while(!![]){try{const _0x272d0b=parseInt(_0x4467df(0x12a))/0x1*(parseInt(_0x4467df(0x10f))/0x2)+parseInt(_0x4467df(0x120))/0x3+parseInt(_0x4467df(0x117))/0x4+parseInt(_0x4467df(0x11f))/0x5+-parseInt(_0x4467df(0x11e))/0x6+-parseInt(_0x4467df(0x105))/0x7+-parseInt(_0x4467df(0x113))/0x8*(-parseInt(_0x4467df(0x114))/0x9);if(_0x272d0b===_0x1462c0)break;else _0x2bafaa['push'](_0x2bafaa['shift']());}catch(_0x181b0c){_0x2bafaa['push'](_0x2bafaa['shift']());}}}(_0x5566,0xc9d9f));let canvasWidth=0x2bc,canvasHeight=0x190,canvasElement;const playerColor=[0x0,0x0,0xff],aiColor=[0xff,0x0,0x0],puckColor=[0xff,0xff,0xff],fieldColor=[0x32,0x32,0x32],scoreColor=[0xc8,0xc8,0xc8,0x64],paddleRadius=0x1e,puckRadius=0xc,goalWidth=0x6e,friction=0.99,maxPuckSpeed=0x14,hitForceMultiplier=0.25,wallRestitution=-0.85;let player,ai,puck,playerScore=0x0,aiScore=0x0,difficulty=_0x3c8eb5(0x111),isDragging=![],aiGlobalSpeedMultiplier=0x1;const aiBaseX=canvasWidth/0x5*0x4,aiDefensiveLine=canvasWidth/0x6*0x5,aiOffensivePush=paddleRadius*0.5,aiAimAssist=0.1,cornerCheckRadius=paddleRadius*0x2,fieldCenterX=canvasWidth*0.4,fieldCenterY=canvasHeight/0x2,STUCK_THRESHOLD_FRAMES=0x2d,STUCK_PUCK_MOVE_THRESHOLD=0.5;function setup(){const _0x51b219=_0x3c8eb5;canvasElement=createCanvas(canvasWidth,canvasHeight),canvasElement[_0x51b219(0x10e)](document[_0x51b219(0x121)]),player={'x':canvasWidth/0x4,'y':canvasHeight/0x2,'r':paddleRadius,'color':playerColor,'prevX':canvasWidth/0x4,'prevY':canvasHeight/0x2,'velX':0x0,'velY':0x0},ai={'x':aiBaseX,'y':canvasHeight/0x2,'r':paddleRadius,'color':aiColor,'prevX':aiBaseX,'prevY':canvasHeight/0x2,'velX':0x0,'velY':0x0,'stuckInCornerTimer':0x0,'lastPuckPosInCorner':{'x':-0x1,'y':-0x1},'isStuckEscaping':![]},puck={'x':canvasWidth/0x2,'y':canvasHeight/0x2,'r':puckRadius,'vx':0x0,'vy':0x0,'color':puckColor},textAlign(CENTER,CENTER),noStroke();const _0x2b21fd=document[_0x51b219(0x11b)](_0x51b219(0x108));_0x2b21fd[_0x51b219(0x107)](_0x51b219(0x125),_0x31ab0d=>{const _0x138bb3=_0x51b219;difficulty=_0x31ab0d[_0x138bb3(0x101)][_0x138bb3(0x11a)];}),difficulty=_0x2b21fd[_0x51b219(0x11a)];const _0x1935c6=document['getElementById'](_0x51b219(0x128)),_0x1d89db=document[_0x51b219(0x11b)](_0x51b219(0x127));_0x1935c6[_0x51b219(0x107)]('input',_0x5c264f=>{const _0x295d22=_0x51b219;aiGlobalSpeedMultiplier=parseFloat(_0x5c264f[_0x295d22(0x101)][_0x295d22(0x11a)]),_0x1d89db[_0x295d22(0x11d)]=aiGlobalSpeedMultiplier[_0x295d22(0x126)](0x1);}),aiGlobalSpeedMultiplier=parseFloat(_0x1935c6['value']),_0x1d89db[_0x51b219(0x11d)]=aiGlobalSpeedMultiplier[_0x51b219(0x126)](0x1);}function draw(){updatePlayerVelocity(),updateAI(),updatePuck(),checkCollisions(),checkGoal(),drawBackgroundScore(),drawField(),drawPaddles(),drawPuck();}function mousePressed(){const _0x339980=_0x3c8eb5;let _0x142fcc=dist(mouseX,mouseY,player['x'],player['y']);_0x142fcc<player['r']&&(isDragging=!![],canvasElement[_0x339980(0x124)](_0x339980(0x123)));}function mouseDragged(){const _0x4afd47=_0x3c8eb5;isDragging&&(player['prevX']=player['x'],player[_0x4afd47(0x104)]=player['y'],player['x']=constrain(mouseX,player['r'],canvasWidth/0x2-player['r']),player['y']=constrain(mouseY,player['r'],canvasHeight-player['r']));}function mouseReleased(){const _0x40ed18=_0x3c8eb5;isDragging&&(isDragging=![],canvasElement[_0x40ed18(0x12b)](_0x40ed18(0x123)));}function updatePlayerVelocity(){const _0x498711=_0x3c8eb5;if(!isDragging){player['velX']*=0.8,player['velY']*=0.8;if(abs(player[_0x498711(0x10d)])<0.1)player[_0x498711(0x10d)]=0x0;if(abs(player[_0x498711(0x116)])<0.1)player[_0x498711(0x116)]=0x0;}else player[_0x498711(0x10d)]=player['x']-player[_0x498711(0x10c)],player['velY']=player['y']-player[_0x498711(0x104)];!isDragging&&(player[_0x498711(0x10c)]=player['x'],player['prevY']=player['y']);}function updateAI(){const _0x23c5f3=_0x3c8eb5;ai[_0x23c5f3(0x10c)]=ai['x'],ai[_0x23c5f3(0x104)]=ai['y'];let _0x13f23f;switch(difficulty){case _0x23c5f3(0x10b):_0x13f23f=0.05;break;case _0x23c5f3(0x112):_0x13f23f=0.18;break;case _0x23c5f3(0x111):default:_0x13f23f=0.11;break;}_0x13f23f*=aiGlobalSpeedMultiplier;let _0x24ab8a=aiBaseX,_0x25a6ac=canvasHeight/0x2,_0x35a8ae=_0x13f23f,_0xfd8d30=![];if(ai[_0x23c5f3(0x11c)])console[_0x23c5f3(0x129)](_0x23c5f3(0x115)),_0x24ab8a=aiBaseX*0.95,_0x25a6ac=canvasHeight/0x2,_0x35a8ae*=0x3,dist(ai['x'],ai['y'],_0x24ab8a,_0x25a6ac)<paddleRadius*1.5&&(console[_0x23c5f3(0x129)](_0x23c5f3(0x102)),ai[_0x23c5f3(0x11c)]=![],ai[_0x23c5f3(0x110)]=0x0);else{const _0x4a6d91=canvasWidth-puck['x'],_0xf87d40=sqrt(puck['vx']*puck['vx']+puck['vy']*puck['vy']),_0x4f18ad=dist(ai['x'],ai['y'],puck['x'],puck['y']);let _0x240e0e=puck['y']<cornerCheckRadius&&ai['y']<cornerCheckRadius*1.2,_0x4f9232=puck['y']>canvasHeight-cornerCheckRadius&&ai['y']>canvasHeight-cornerCheckRadius*1.2,_0x4113d1=puck['x']>canvasWidth-cornerCheckRadius&&ai['x']>canvasWidth-cornerCheckRadius*1.5;_0xfd8d30=_0x4113d1&&(_0x240e0e||_0x4f9232);if(puck['x']>ai['x']&&puck['x']>aiDefensiveLine&&!_0xfd8d30){console[_0x23c5f3(0x129)]('AI\x20State:\x20DEFENSE!'),_0x24ab8a=puck['x']+paddleRadius;let _0x1f3e7a=puck['y']+puck['vy']*(dist(puck['x'],puck['y'],canvasWidth,canvasHeight/0x2)/(_0xf87d40+0.1))*0.5;_0x25a6ac=lerp(puck['y'],constrain(_0x1f3e7a,puck['r'],canvasHeight-puck['r']),0.5),_0x24ab8a=constrain(_0x24ab8a,canvasWidth/0x2+ai['r'],canvasWidth-ai['r']),_0x4a6d91<ai['r']*0x2&&(_0x24ab8a=puck['x']-ai['r']*0.5,_0x25a6ac=puck['y']),_0x35a8ae*=1.8*aiGlobalSpeedMultiplier,ai[_0x23c5f3(0x110)]=0x0;}else{if(_0xfd8d30&&_0x4f18ad<ai['r']+puck['r']+paddleRadius){console[_0x23c5f3(0x129)]('AI\x20State:\x20Corner\x20Detected');let _0x395475=dist(puck['x'],puck['y'],ai[_0x23c5f3(0x119)]['x'],ai['lastPuckPosInCorner']['y'])>STUCK_PUCK_MOVE_THRESHOLD;_0x395475||ai['lastPuckPosInCorner']['x']<0x0?(ai[_0x23c5f3(0x110)]=0x0,ai[_0x23c5f3(0x119)]={'x':puck['x'],'y':puck['y']},console[_0x23c5f3(0x129)](_0x23c5f3(0x10a))):(ai['stuckInCornerTimer']++,console[_0x23c5f3(0x129)]('Corner:\x20Puck\x20stuck.\x20Timer:\x20'+ai[_0x23c5f3(0x110)]+'/'+STUCK_THRESHOLD_FRAMES));if(ai['stuckInCornerTimer']>STUCK_THRESHOLD_FRAMES)console['log']('AI\x20detected\x20STUCK\x20state!\x20Initiating\x20tactical\x20retreat.'),ai[_0x23c5f3(0x11c)]=!![],_0x24ab8a=ai['x'],_0x25a6ac=ai['y'];else{console['log'](_0x23c5f3(0x118));let _0x61d473=fieldCenterX-puck['x'],_0x12be01=fieldCenterY-puck['y'],_0x45bc60=sqrt(_0x61d473*_0x61d473+_0x12be01*_0x12be01);if(_0x45bc60>0.1){let _0x48a411=_0x61d473/_0x45bc60,_0x8663b9=_0x12be01/_0x45bc60,_0x18f0e6=ai['r']+puck['r']*0.5;_0x24ab8a=puck['x']-_0x48a411*_0x18f0e6,_0x25a6ac=puck['y']-_0x8663b9*_0x18f0e6;if(_0x240e0e)_0x25a6ac=max(_0x25a6ac,ai['y']+0x2);if(_0x4f9232)_0x25a6ac=min(_0x25a6ac,ai['y']-0x2);_0x24ab8a=min(_0x24ab8a,ai['x']-0x2);}else _0x24ab8a=aiBaseX,_0x25a6ac=fieldCenterY;_0x35a8ae*=0x2*aiGlobalSpeedMultiplier;}}else{ai[_0x23c5f3(0x110)]=0x0,ai[_0x23c5f3(0x119)]={'x':-0x1,'y':-0x1};if(puck['x']>canvasWidth/0x2-puck['r']){console[_0x23c5f3(0x129)](_0x23c5f3(0x103)),_0x24ab8a=puck['x']-aiOffensivePush-_0xf87d40*0.5,_0x24ab8a=max(canvasWidth/0x2+ai['r'],_0x24ab8a),_0x25a6ac=puck['y'];let _0x156c57=abs(player['y']-canvasHeight/0x2);dist(ai['x'],ai['y'],player['x'],player['y'])>canvasWidth/0x3&&_0x156c57>goalWidth/0x3&&(player['y']<canvasHeight/0x2?(_0x25a6ac=puck['y']+aiAimAssist*canvasHeight,_0x24ab8a-=puck['r']):(_0x25a6ac=puck['y']-aiAimAssist*canvasHeight,_0x24ab8a-=puck['r'])),_0x35a8ae*=map(_0xf87d40,0x0,maxPuckSpeed,0x1,1.5)*aiGlobalSpeedMultiplier;}else console[_0x23c5f3(0x129)](_0x23c5f3(0x106)),_0x24ab8a=aiBaseX,_0x25a6ac=canvasHeight/0x2,_0x35a8ae*=0.7*aiGlobalSpeedMultiplier;}}}_0x24ab8a=constrain(_0x24ab8a,canvasWidth/0x2+ai['r'],canvasWidth-ai['r']),_0x25a6ac=constrain(_0x25a6ac,ai['r'],canvasHeight-ai['r']);if(!ai[_0x23c5f3(0x11c)])ai['x']=lerp(ai['x'],_0x24ab8a,_0x35a8ae),ai['y']=lerp(ai['y'],_0x25a6ac,_0x35a8ae);else{let _0x16b271=_0x24ab8a-ai['x'],_0x5a2ddc=_0x25a6ac-ai['y'],_0x38bcc8=sqrt(_0x16b271*_0x16b271+_0x5a2ddc*_0x5a2ddc),_0x2381d0=_0x13f23f*0xf;_0x38bcc8>_0x2381d0&&(_0x16b271=_0x16b271/_0x38bcc8*_0x2381d0,_0x5a2ddc=_0x5a2ddc/_0x38bcc8*_0x2381d0),ai['x']+=_0x16b271,ai['y']+=_0x5a2ddc;}const _0xf12bce=0x1;ai['x']=constrain(ai['x'],canvasWidth/0x2+ai['r']+_0xf12bce,canvasWidth-ai['r']-_0xf12bce),ai['y']=constrain(ai['y'],ai['r']+_0xf12bce,canvasHeight-ai['r']-_0xf12bce),ai[_0x23c5f3(0x10d)]=ai['x']-ai[_0x23c5f3(0x10c)],ai['velY']=ai['y']-ai[_0x23c5f3(0x104)];}function updatePuck(){puck['x']+=puck['vx'],puck['y']+=puck['vy'],puck['vx']*=friction,puck['vy']*=friction;let _0x5a234b=sqrt(puck['vx']*puck['vx']+puck['vy']*puck['vy']);_0x5a234b>maxPuckSpeed&&(puck['vx']=puck['vx']/_0x5a234b*maxPuckSpeed,puck['vy']=puck['vy']/_0x5a234b*maxPuckSpeed);_0x5a234b<0.1&&(puck['vx']=0x0,puck['vy']=0x0);const _0x4a8f9e=canvasHeight/0x2-goalWidth/0x2,_0x197618=canvasHeight/0x2+goalWidth/0x2,_0x4dd0e9=0x1;if(puck['y']-puck['r']<0x0)puck['vy']*=wallRestitution,puck['y']=puck['r']+_0x4dd0e9,puck['vx']*=friction;else puck['y']+puck['r']>canvasHeight&&(puck['vy']*=wallRestitution,puck['y']=canvasHeight-puck['r']-_0x4dd0e9,puck['vx']*=friction);if(puck['x']-puck['r']<0x0)(puck['y']<_0x4a8f9e||puck['y']>_0x197618)&&(puck['vx']*=wallRestitution,puck['x']=puck['r']+_0x4dd0e9,puck['vy']*=friction);else puck['x']+puck['r']>canvasWidth&&((puck['y']<_0x4a8f9e||puck['y']>_0x197618)&&(puck['vx']*=wallRestitution,puck['x']=canvasWidth-puck['r']-_0x4dd0e9,puck['vy']*=friction));puck['x']=constrain(puck['x'],-puck['r']*0x2,canvasWidth+puck['r']*0x2),puck['y']=constrain(puck['y'],puck['r'],canvasHeight-puck['r']);}function _0x5566(){const _0x18f7fb=['parent','6HidWgS','stuckInCornerTimer','medium','hard','1253816sYcCaJ','9nfTEbo','AI\x20State:\x20TACTICAL\x20RETREAT!','velY','743824nIonHd','Corner:\x20Attempting\x20normal\x20escape.','lastPuckPosInCorner','value','getElementById','isStuckEscaping','textContent','4385454DisqVp','4494955LpJisA','2912163gxUPjL','body','Раунд\x20скинуто.\x20Рахунок:','grabbing','addClass','change','toFixed','speedValue','aiSpeed','log','163617KmJcEz','removeClass','target','AI\x20finished\x20retreat.','AI\x20State:\x20ACTIVE\x20PLAY','prevY','8018878VtPtXP','AI\x20State:\x20WAITING','addEventListener','difficulty','color','Corner:\x20Puck\x20moved\x20or\x20first\x20entry.\x20Timer\x20reset.','easy','prevX','velX'];_0x5566=function(){return _0x18f7fb;};return _0x5566();}function checkCollisions(){(isDragging||dist(player['x'],player['y'],puck['x'],puck['y'])<player['r']+puck['r']+0xa)&&handlePaddleCollision(player),handlePaddleCollision(ai);}function handlePaddleCollision(_0x4ef665){const _0x31cd60=_0x3c8eb5;let _0x26b32c=puck['x']-_0x4ef665['x'],_0x384c4f=puck['y']-_0x4ef665['y'],_0x5bb21d=sqrt(_0x26b32c*_0x26b32c+_0x384c4f*_0x384c4f),_0x2871f9=puck['r']+_0x4ef665['r'];if(_0x5bb21d<_0x2871f9){let _0x3732cc=atan2(_0x384c4f,_0x26b32c),_0x4e91c4=0x7,_0x3c0c49=sqrt(_0x4ef665[_0x31cd60(0x10d)]*_0x4ef665['velX']+_0x4ef665['velY']*_0x4ef665[_0x31cd60(0x116)]),_0x5775ee=_0x4e91c4+_0x3c0c49*hitForceMultiplier*1.5;_0x5775ee=min(_0x5775ee,maxPuckSpeed*1.1),puck['vx']=cos(_0x3732cc)*_0x5775ee,puck['vy']=sin(_0x3732cc)*_0x5775ee;let _0x52a5a1=_0x2871f9-_0x5bb21d,_0x542e33=1.1;puck['x']+=cos(_0x3732cc)*(_0x52a5a1*_0x542e33+0x1),puck['y']+=sin(_0x3732cc)*(_0x52a5a1*_0x542e33+0x1),_0x26b32c=puck['x']-_0x4ef665['x'],_0x384c4f=puck['y']-_0x4ef665['y'],_0x5bb21d=sqrt(_0x26b32c*_0x26b32c+_0x384c4f*_0x384c4f);_0x5bb21d<_0x2871f9&&(puck['x']=_0x4ef665['x']+cos(_0x3732cc)*(_0x2871f9+0.1),puck['y']=_0x4ef665['y']+sin(_0x3732cc)*(_0x2871f9+0.1));let _0xe79b45=sqrt(puck['vx']*puck['vx']+puck['vy']*puck['vy']);_0xe79b45>maxPuckSpeed&&(puck['vx']=puck['vx']/_0xe79b45*maxPuckSpeed,puck['vy']=puck['vy']/_0xe79b45*maxPuckSpeed);}}function checkGoal(){const _0x7f7db1=canvasHeight/0x2-goalWidth/0x2,_0x50172b=canvasHeight/0x2+goalWidth/0x2;puck['x']<puck['r']&&puck['y']>_0x7f7db1&&puck['y']<_0x50172b&&(aiScore++,resetRound(!![])),puck['x']>canvasWidth-puck['r']&&puck['y']>_0x7f7db1&&puck['y']<_0x50172b&&(playerScore++,resetRound(![]));}function drawBackgroundScore(){background(fieldColor[0x0],fieldColor[0x1],fieldColor[0x2]),fill(scoreColor[0x0],scoreColor[0x1],scoreColor[0x2],scoreColor[0x3]),textSize(0x96),text(playerScore+'\x20-\x20'+aiScore,canvasWidth/0x2,canvasHeight/0x2);}function drawField(){stroke(0xc8),strokeWeight(0x4),line(canvasWidth/0x2,0x0,canvasWidth/0x2,canvasHeight),noFill(),ellipse(canvasWidth/0x2,canvasHeight/0x2,0x50,0x50);const _0x50544a=canvasHeight/0x2-goalWidth/0x2,_0x435cb0=canvasHeight/0x2+goalWidth/0x2;stroke(playerColor[0x0],playerColor[0x1],playerColor[0x2],0x96),line(0x0,_0x50544a,0x0,_0x435cb0),stroke(aiColor[0x0],aiColor[0x1],aiColor[0x2],0x96),line(canvasWidth,_0x50544a,canvasWidth,_0x435cb0),noStroke();}function drawPaddles(){const _0x265438=_0x3c8eb5;fill(player['color'][0x0],player[_0x265438(0x109)][0x1],player[_0x265438(0x109)][0x2]),ellipse(player['x'],player['y'],player['r']*0x2),fill(ai[_0x265438(0x109)][0x0],ai[_0x265438(0x109)][0x1],ai[_0x265438(0x109)][0x2]),ellipse(ai['x'],ai['y'],ai['r']*0x2);}function drawPuck(){const _0x9e7589=_0x3c8eb5;fill(puck[_0x9e7589(0x109)][0x0],puck['color'][0x1],puck[_0x9e7589(0x109)][0x2]),ellipse(puck['x'],puck['y'],puck['r']*0x2);}function resetRound(_0x5702d9){const _0x5144ac=_0x3c8eb5;puck['x']=canvasWidth/0x2,puck['y']=canvasHeight/0x2,puck['vx']=_0x5702d9?random(0x2,0x4):random(-0x4,-0x2),puck['vy']=random(-1.5,1.5),player['x']=canvasWidth/0x4,player['y']=canvasHeight/0x2,player[_0x5144ac(0x10d)]=0x0,player[_0x5144ac(0x116)]=0x0,player[_0x5144ac(0x10c)]=player['x'],player[_0x5144ac(0x104)]=player['y'],isDragging=![],canvasElement[_0x5144ac(0x12b)]('grabbing'),ai['x']=aiBaseX,ai['y']=canvasHeight/0x2,ai[_0x5144ac(0x10d)]=0x0,ai[_0x5144ac(0x116)]=0x0,ai[_0x5144ac(0x10c)]=ai['x'],ai[_0x5144ac(0x104)]=ai['y'],ai[_0x5144ac(0x110)]=0x0,ai[_0x5144ac(0x119)]={'x':-0x1,'y':-0x1},ai['isStuckEscaping']=![],console[_0x5144ac(0x129)](_0x5144ac(0x122),playerScore,'-',aiScore);}

    </script>

</body>
</html>